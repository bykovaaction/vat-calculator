<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Калькулятор НДС</title>
<style>
body {
  font-family: Arial, sans-serif;
  background:#f4f6f9;
  padding:20px;
}
.box {
  background:#fff;
  padding:30px 20px 20px 20px;
  border-radius:10px;
  max-width:450px;
  margin:auto;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  display:flex;
  flex-direction: column;
  align-items: center;
}
h2 {
  text-align:center;
  margin-bottom:20px;
}
.field {
  width:100%;
  margin-bottom:12px;
}
label {
  font-weight:bold;
  display:block;
  margin-bottom:4px;
}
.small-text {
  font-size:13px;
  color:#555;
  margin-bottom:4px;
}
input, select, button {
  width:100%;
  padding:10px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:14px;
  box-sizing: border-box;
}
button#calcBtn {
  background:#2d89ef;
  color:#fff;
  border:none;
  cursor:pointer;
  font-weight:bold;
  margin-top:10px;
}
button#calcBtn:hover {
  background:#1b5fbf;
}
.result {
  width:100%;
  margin-top:15px;
  padding:12px;
  background:#eef3ff;
  border-radius:6px;
  font-weight:bold;
  line-height:1.6;
  text-align:center;
}
.result-row {
  display:flex;
  justify-content: center;
  align-items: center;
  margin-bottom:6px;
}
.result-label {
  width:140px;
  text-align:right;
  margin-right:6px;
}
.result-value {
  min-width:100px;
  text-align:left;
}
/* Кнопка Copy */
.copy-btn {
  width:50px;
  height:24px;
  background:#ddd;
  color:#000;
  border:none;
  border-radius:4px;
  margin-left:6px;
  cursor:pointer;
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.copy-btn:hover {
  background:#ccc;
}
</style>
</head>
<body>

<div class="box">
<h2>Калькулятор НДС</h2>

<div class="field">
  <label>Введите сумму</label>
  <div class="small-text">Введите исходную сумму (с НДС или без — в зависимости от выбора ниже)</div>
  <input type="text" id="amount" placeholder="Например: 1000">
</div>

<div class="field">
  <label>Введите ставку НДС (%)</label>
  <input type="number" id="rate" value="20">
</div>

<div class="field">
  <label>Что хотите посчитать</label>
  <select id="type">
    <option value="add">Сумму с НДС</option>
    <option value="remove">Сумму без НДС</option>
  </select>
</div>

<button id="calcBtn">Рассчитать</button>

<div class="result" id="result"></div>
</div>

<script>
// Форматирование числа
function formatNumber(num) {
  return num.toLocaleString('ru-RU', {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  });
}

// Копирование текста через скрытый input (работает в Word/Excel)
function copyToClipboard(text) {
  var tempInput = document.createElement("input");
  tempInput.style.position = "absolute";
  tempInput.style.left = "-1000px";
  tempInput.value = text;
  document.body.appendChild(tempInput);
  tempInput.select();
  tempInput.setSelectionRange(0, 99999); // для мобильных
  document.execCommand("copy");
  document.body.removeChild(tempInput);
}

document.getElementById("calcBtn").addEventListener("click", function() {
  var amountInput = document.getElementById("amount").value.replace(",", ".");
  var amount = parseFloat(amountInput);
  var rate = parseFloat(document.getElementById("rate").value);
  var type = document.getElementById("type").value;
  var result = document.getElementById("result");

  if (isNaN(amount) || isNaN(rate)) {
    result.innerHTML = "Введите корректные данные";
    return;
  }

  var vat, withoutVAT, withVAT;

  if (type === "add") {
    vat = amount * rate / 100;
    withoutVAT = amount;
    withVAT = amount + vat;
  } else {
    vat = amount * rate / (100 + rate);
    withVAT = amount;
    withoutVAT = amount - vat;
  }

  // Формируем блок результата с кнопками Copy
  result.innerHTML = `
    <div class="result-row">
      <div class="result-label">Сумма без НДС:</div>
      <div class="result-value">${formatNumber(withoutVAT)}</div>
      <button class="copy-btn" onclick="copyToClipboard('${formatNumber(withoutVAT)}')">Copy</button>
    </div>
    <div class="result-row">
      <div class="result-label">НДС:</div>
      <div class="result-value">${formatNumber(vat)}</div>
      <button class="copy-btn" onclick="copyToClipboard('${formatNumber(vat)}')">Copy</button>
    </div>
    <div class="result-row">
      <div class="result-label">Сумма с НДС:</div>
      <div class="result-value">${formatNumber(withVAT)}</div>
      <button class="copy-btn" onclick="copyToClipboard('${formatNumber(withVAT)}')">Copy</button>
    </div>
  `;
});
</script>

</body>
</html>
